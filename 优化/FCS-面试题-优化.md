# 面试题-优化

#### 你了解回流与重绘吗？

[你真的了解回流和重绘吗](https://zhuanlan.zhihu.com/p/52076790)



#### CDN 服务如何实现网络加速？



#### 有哪些性能优化的方面？

**content：**

- 减少HTTP请求：合并文件、CSS精灵、inline Image
- 减少DNS查询：DNS查询完成之前浏览器不能从这个主机下载任何任何文件。方法：DNS缓存、将资源分布到恰当数量的主机名，平衡并行下载和DNS查询
- 避免重定向：多余的中间访问
- 使Ajax可缓存
- 非必须组件延迟加载
- 未来所需组件预加载
- 减少DOM元素数量
- 将资源放到不同的域下：浏览器同时从一个域下载资源的数目有限，增加域可以提高并行下载量
- 减少iframe数量
- 不要404

**Server：**

- 使用CDN
- 添加Expires或者Cache-Control响应头
- 对组件使用Gzip压缩
- 配置ETag
- Flush Buffer Early
- Ajax使用GET进行请求
- 避免空src的img标签

**Cookie：**

- 减小cookie大小
- 引入资源的域名不要包含cookie

**css：**

- 将样式表放到页面顶部
- 不使用CSS表达式
- 不使用IE的Filter

**Javascript：**

- 将脚本放到页面底部
- 将javascript和css从外部引入
- 压缩javascript和css
- 删除不需要的脚本
- 减少DOM访问
- 合理设计事件监听器

**图片：**

- 优化图片：根据实际颜色需要选择色深、压缩
- 优化css 雪碧图
- 图片地图
- 内联图片
- 不要在HTML中拉伸图片
- 保证favicon.ico小并且可缓存



#### 具体性能优化方法

- 减少http请求次数：
  - CSS Sprites, JS、CSS源码压缩、图片大小控制合适；
  - 网页Gzip，CDN托管，data缓存 ，图片服务器。
- 前端模板 JS+数据，减少由于HTML标签导致的带宽浪费，
- 前端用变量保存AJAX请求结果，每次操作本地变量，不用请求，减少请求次数
- 用innerHTML代替DOM操作，减少DOM操作次数，优化javascript性能。
- 当需要设置的样式很多时设置className而不是直接操作style
- 少用全局变量、缓存DOM节点查找的结果。
- 减少IO读取操作
- 避免使用CSS Expression（css表达式)又称Dynamic properties(动态属性)
- 图片预加载，将样式表放在顶部
- 将脚本放在底部 加上时间戳
- 避免在页面的主体布局中使用table，table要等其中的内容完全下载之后才会显示出来，显示比div+css布局慢



#### 前端需要注意哪些SEO

- 合理的title、description、keywords：搜索对这三项的权重逐个减小；
  - title值强调重点即可，重要关键词出现不要超过2次，而且要靠前，不同页面title要有所不同；
  - description把页面内容高度概括，长度合适，不可过分堆砌关键词，不同页面description有所不同；
  - keywords列举出重要关键词即可
- 语义化的HTML代码，符合W3C规范：语义化代码让搜索引擎容易理解网页
- 重要内容HTML代码放在最前：搜索引擎抓取HTML顺序是从上到下，有的搜索引擎对抓取长度有限制，保证重要内容一定会被抓取
- 重要内容不要用js输出：爬虫不会执行js获取内容
- 少用iframe：搜索引擎不会抓取iframe中的内容
- 非装饰性图片必须加alt
- 提高网站速度：网站速度是搜索引擎排序的一个重要指标
- 



#### 如何做SEO优化?

- **标题与关键词**
  - 设置有吸引力切合实际的标题，标题中要包含所做的关键词
- **网站结构目录**
  - 最好不要超过三级，每级有“面包屑导航”，使网站成树状结构分布
- **页面元素**
  - 给图片标注"Alt"可以让搜索引擎更友好的收录
- **网站内容**
  - 每个月每天有规律的更新网站的内容，会使搜索引擎更加喜欢
- **友情链接**
  - 对方一定要是正规网站，每天有专业的团队或者个人维护更新
- **内链的布置**
  - 使网站形成类似蜘蛛网的结构，不会出现单独连接的页面或链接
- **流量分析**
  - 通过统计工具(百度统计，CNZZ)分析流量来源，指导下一步的SEO



#### webpack 编译优化？



#### webpack 打包构建优化？



#### 如何避免频繁的操作 `DOM`。

- 对 `DOM` 查询做缓存：

  ```js
  // 缓存dom查询结果
  const lis = document.getElementsByTagName('li');
  const length = lis.length;
  for(let i = 0; i<length; i++) {
    // 缓存length,只进行一次 dom 查询
  }
  ```

- 将频繁的操作修改为一次性操作：

  ```js
  // 创建一个文档片段，此时没有插入到 dom 树中
  const frag = document.createDocumentFragment();
  
  // 执行插入
  for(let x = 0; x < 10; x++) {
    // ...
  }
  
  // 都完成后，再插入到 dom 树中
  document.body.appendChild(frag);
  
  ```

#### 前端性能优化。

- 减少资源体积（合并代码、压缩代码、splitChunks 抽离公共文件、服务端开启 gzip 压缩）
- 减少 `http` 请求（合并 `http` 请求、合并资源、图片懒加载、`cookie` 优化、`http` 请求和资源加载的区分优化）
- 减少计算
- 预渲染、`ssr` 服务器端渲染
- 对 `dom` 查询进行缓存，将频繁的 `dom` 操作合并到一起插入 `dom` 结构，
- 节流防抖
- `cs s` 放头部、`js`  放底部
- 使用 cdn 加载第三方模块
- 长列表滚动到可视区域动态加载
- 骨架屏

#### 页面渲染的时候时常会遇到白屏的时候，我们怎么优化这种情况？

- 使用缓存
- 服务端渲染 ssr
- 按需加载
- 路由分割 

#### 前端如何做性能监控、异常监控、前端用户埋点 sdk ？

性能监控：

- `http` 的方面，在后端 `log` 日志，流入 `kafka`，然后在 `kafka` 消费数据，可以准确的监控到哪些接口有异常？异常率是多少？
- 前端的 `Performance` 的 `api`

异常监控：

- `window.onerror` 是进行 `js` 异常的监听事件，但在 IE 中是不支持的
- IE 的监控，要使用 `try catch` 的方式进行捕获
- 如何用 `try catch` 捕获异步的异常

前端 `sdk` 埋点：（统计用户的 UV/PV 分析，用户的转化率等等）

